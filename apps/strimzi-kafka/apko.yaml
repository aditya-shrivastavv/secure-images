contents:
  keyring:
    - https://packages.wolfi.dev/os/wolfi-signing.rsa.pub
  repositories:
    - https://packages.wolfi.dev/os
    - "@local /tmp/packages"
  packages:
    - wolfi-base
    - bash
    - ca-certificates
    - curl
    - openjdk-21-jre
    - strimzi-kafka@local

# entrypoint:
#   command: /opt/kafka/kafka_run.sh

# cmd: /opt/kafka/kafka_run.sh
cmd: /bin/bash

environment:
  KAFKA_HOME: /opt/kafka
  KAFKA_VERSION: "4.0.0"
  STRIMZI_VERSION: "0.46.1"
  KAFKA_EXPORTER_HOME: /opt/kafka-exporter
  KAFKA_EXPORTER_VERSION: "1.9.0"
  JMX_EXPORTER_HOME: /opt/prometheus-jmx-exporter
  JMX_EXPORTER_VERSION: "1.3.0"
  CRUISE_CONTROL_HOME: /opt/cruise-control
  PATH: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/kafka/bin

work-dir: /opt/kafka

accounts:
  users:
    - username: kafka
      uid: 1001
      gid: 0
  groups:
    - groupname: root
      gid: 0

archs:
  - x86_64
  - aarch64

annotations:
  org.opencontainers.image.source: https://github.com/strimzi/strimzi-kafka-operator
  org.opencontainers.image.title: "Strimzi Kafka"
  org.opencontainers.image.description: "Kafka image used by the Strimzi Kafka Operator to run Kafka clusters"
  org.opencontainers.image.version: "0.46.1"
  org.opencontainers.image.vendor: "Strimzi"
  org.opencontainers.image.licenses: "Apache-2.0"
  org.opencontainers.image.url: "https://strimzi.io"
  org.opencontainers.image.documentation: "https://strimzi.io/docs/"

paths:
  - path: /opt/kafka
    type: directory
    uid: 1001
    gid: 0
    permissions: 0755
  - path: /opt/kafka-exporter
    type: directory
    uid: 1001
    gid: 0
    permissions: 0755
  - path: /opt/prometheus-jmx-exporter
    type: directory
    uid: 1001
    gid: 0
    permissions: 0755
  - path: /opt/cruise-control
    type: directory
    uid: 1001
    gid: 0
    permissions: 0755
